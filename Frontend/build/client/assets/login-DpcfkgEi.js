import{w as u}from"./with-props-DSW1myl8.js";import{g as j,r as t,j as e,f as x}from"./chunk-DQRVZFIR-CtLrds9g.js";const h=()=>{const c=j(),[r,m]=t.useState(""),[i,g]=t.useState(""),[v,o]=t.useState(""),[l,d]=t.useState(!1),p=async s=>{s.preventDefault(),o(""),d(!0);try{const n=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:i})}),a=await n.json();console.log("Login response data:",a),console.log("Token from response:",a.token),n.ok?(localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),c("/dashboard")):o(a.message||"Login failed")}catch{o("An error occurred. Please try again.")}finally{d(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"login-background",children:[e.jsx("div",{className:"bg-element2"}),e.jsx("div",{className:"bg-element2"}),e.jsx("div",{className:"bg-element2"}),e.jsx("div",{className:"bg-element2"}),e.jsx("div",{className:"bg-element2"}),e.jsx("div",{className:"bg-element2"}),e.jsx("div",{className:"pulse-element2"}),e.jsx("div",{className:"pulse-element2"}),e.jsx("div",{className:"pulse-element2"}),e.jsx("div",{className:"pulse-element2"}),e.jsx("div",{className:"pulse-element2"}),e.jsx("div",{className:"pulse-element2"}),e.jsx("div",{style:{paddingTop:"6rem"},children:e.jsxs("div",{className:"loginContainer",children:[e.jsx("h1",{className:"header",children:"Login"}),e.jsx("p",{className:"tagline",children:"Please enter your details to login to your account"}),e.jsxs("form",{children:[e.jsxs("div",{className:"form",children:[e.jsx("input",{type:"email",name:"email",value:r,onChange:s=>m(s.target.value),placeholder:"Enter your email",disabled:l}),e.jsx("input",{type:"password",name:"password",value:i,onChange:s=>g(s.target.value),placeholder:"Enter your password",disabled:l})]}),e.jsx("div",{className:"forgot-password",children:e.jsx(x,{to:"/forgotpassword",className:"forgot-password-link",children:"Forgot your password?"})}),e.jsx("div",{className:"submitButton",children:e.jsx("button",{type:"button",onClick:p,disabled:l,children:"Log in"})})]})]})})]})})},y=u(h);export{y as default};
